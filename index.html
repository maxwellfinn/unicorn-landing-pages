<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Landing Pages | Unicorn Marketers</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-blue: #3B9FD8;
      --primary-blue-dark: #2d7fb0;
      --primary-blue-light: #5bb5e8;
      --dark-gray: #3D4246;
      --text-dark: #2D3436;
      --text-medium: #636E72;
      --text-light: #B2BEC3;
      --bg-white: #FFFFFF;
      --bg-light: #F8FAFB;
      --bg-card: #FFFFFF;
      --border-light: #E8EDEF;
      --success: #00B894;
      --warning: #FDCB6E;
      --error: #E17055;
      --gradient-start: #3B9FD8;
      --gradient-end: #00B894;
      --shadow-sm: 0 2px 8px rgba(59, 159, 216, 0.08);
      --shadow-md: 0 8px 30px rgba(59, 159, 216, 0.12);
      --shadow-lg: 0 20px 60px rgba(59, 159, 216, 0.15);
      --shadow-glow: 0 0 40px rgba(59, 159, 216, 0.3);
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-light);
      color: var(--text-dark);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ============================================
       LOADING SCREEN - Unicorn on Laptop
    ============================================ */
    .loading-screen {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #f8fafb 0%, #e8f4f8 100%);
      z-index: 9999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    .loading-screen.hidden {
      opacity: 0;
      visibility: hidden;
    }

    .unicorn-loader {
      width: 200px;
      height: 200px;
      position: relative;
    }

    .unicorn-character {
      position: absolute;
      width: 120px;
      height: 100px;
      left: 50%;
      transform: translateX(-50%);
      top: 20px;
    }

    /* Unicorn Body */
    .unicorn-body {
      position: absolute;
      width: 60px;
      height: 45px;
      background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
      border-radius: 30px 30px 25px 25px;
      top: 35px;
      left: 30px;
      box-shadow: inset -5px -5px 10px rgba(0,0,0,0.05);
    }

    /* Unicorn Head */
    .unicorn-head {
      position: absolute;
      width: 35px;
      height: 32px;
      background: linear-gradient(135deg, #fff 0%, #f5f5f5 100%);
      border-radius: 50% 50% 45% 45%;
      top: 20px;
      left: 65px;
      box-shadow: inset -3px -3px 8px rgba(0,0,0,0.05);
    }

    /* Horn */
    .unicorn-horn {
      position: absolute;
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-bottom: 25px solid;
      border-bottom-color: var(--primary-blue);
      top: -2px;
      left: 75px;
      transform: rotate(15deg);
      animation: hornGlow 1.5s ease-in-out infinite;
    }

    @keyframes hornGlow {
      0%, 100% { filter: drop-shadow(0 0 3px var(--primary-blue)); }
      50% { filter: drop-shadow(0 0 8px var(--primary-blue-light)); }
    }

    /* Ear */
    .unicorn-ear {
      position: absolute;
      width: 12px;
      height: 16px;
      background: #fff;
      border-radius: 50% 50% 0 0;
      top: 12px;
      left: 68px;
      transform: rotate(-15deg);
    }

    /* Mane */
    .unicorn-mane {
      position: absolute;
      top: 25px;
      left: 55px;
    }

    .mane-strand {
      position: absolute;
      width: 8px;
      height: 20px;
      border-radius: 4px;
      animation: maneWave 1s ease-in-out infinite;
    }

    .mane-strand:nth-child(1) { background: var(--primary-blue); left: 0; animation-delay: 0s; }
    .mane-strand:nth-child(2) { background: #5bb5e8; left: 6px; animation-delay: 0.1s; height: 25px; top: -3px; }
    .mane-strand:nth-child(3) { background: #00B894; left: 12px; animation-delay: 0.2s; height: 22px; top: -1px; }

    @keyframes maneWave {
      0%, 100% { transform: rotate(-5deg); }
      50% { transform: rotate(5deg); }
    }

    /* Eye */
    .unicorn-eye {
      position: absolute;
      width: 6px;
      height: 6px;
      background: var(--dark-gray);
      border-radius: 50%;
      top: 32px;
      left: 85px;
      animation: blink 3s ease-in-out infinite;
    }

    @keyframes blink {
      0%, 90%, 100% { transform: scaleY(1); }
      95% { transform: scaleY(0.1); }
    }

    /* Snout/Nose */
    .unicorn-snout {
      position: absolute;
      width: 4px;
      height: 3px;
      background: #ffb6c1;
      border-radius: 50%;
      top: 42px;
      left: 92px;
    }

    /* Front Legs - Typing! */
    .unicorn-leg-front {
      position: absolute;
      width: 10px;
      height: 20px;
      background: #fff;
      border-radius: 5px;
      top: 70px;
    }

    .unicorn-leg-front.left {
      left: 45px;
      animation: typeLeft 0.3s ease-in-out infinite;
    }

    .unicorn-leg-front.right {
      left: 58px;
      animation: typeRight 0.3s ease-in-out infinite 0.15s;
    }

    @keyframes typeLeft {
      0%, 100% { transform: translateY(0) rotate(-5deg); }
      50% { transform: translateY(-8px) rotate(-15deg); }
    }

    @keyframes typeRight {
      0%, 100% { transform: translateY(0) rotate(5deg); }
      50% { transform: translateY(-8px) rotate(15deg); }
    }

    /* Back Legs */
    .unicorn-leg-back {
      position: absolute;
      width: 10px;
      height: 18px;
      background: #f5f5f5;
      border-radius: 5px;
      top: 72px;
    }

    .unicorn-leg-back.left { left: 32px; }
    .unicorn-leg-back.right { left: 75px; }

    /* Tail */
    .unicorn-tail {
      position: absolute;
      top: 50px;
      left: 15px;
    }

    .tail-strand {
      position: absolute;
      width: 6px;
      height: 25px;
      border-radius: 3px;
      animation: tailWag 1.2s ease-in-out infinite;
    }

    .tail-strand:nth-child(1) { background: var(--primary-blue); left: 0; transform-origin: top; }
    .tail-strand:nth-child(2) { background: #5bb5e8; left: 5px; animation-delay: 0.1s; transform-origin: top; }
    .tail-strand:nth-child(3) { background: #00B894; left: 10px; animation-delay: 0.2s; transform-origin: top; }

    @keyframes tailWag {
      0%, 100% { transform: rotate(-15deg); }
      50% { transform: rotate(15deg); }
    }

    /* Laptop */
    .laptop {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
    }

    .laptop-screen {
      width: 80px;
      height: 50px;
      background: linear-gradient(135deg, #2d3436 0%, #3d4246 100%);
      border-radius: 4px 4px 0 0;
      border: 3px solid #636e72;
      position: relative;
      overflow: hidden;
    }

    .laptop-screen::before {
      content: '';
      position: absolute;
      inset: 4px;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
      border-radius: 2px;
    }

    /* Code lines on screen */
    .code-line {
      position: absolute;
      height: 3px;
      border-radius: 1px;
      animation: codePulse 0.8s ease-in-out infinite;
    }

    .code-line:nth-child(1) { width: 25px; background: var(--primary-blue); top: 10px; left: 8px; }
    .code-line:nth-child(2) { width: 35px; background: #00B894; top: 17px; left: 8px; animation-delay: 0.2s; }
    .code-line:nth-child(3) { width: 20px; background: #FDCB6E; top: 24px; left: 8px; animation-delay: 0.4s; }
    .code-line:nth-child(4) { width: 30px; background: var(--primary-blue-light); top: 31px; left: 8px; animation-delay: 0.6s; }

    @keyframes codePulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    .laptop-base {
      width: 90px;
      height: 6px;
      background: linear-gradient(to bottom, #b2bec3, #636e72);
      border-radius: 0 0 4px 4px;
      margin-left: -5px;
    }

    .laptop-touchpad {
      width: 20px;
      height: 2px;
      background: #4a5254;
      margin: 0 auto;
      border-radius: 1px;
    }

    .loading-text {
      margin-top: 30px;
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-medium);
      animation: loadingDots 1.5s ease-in-out infinite;
    }

    @keyframes loadingDots {
      0%, 20% { content: 'Building magic'; }
      40% { content: 'Building magic.'; }
      60% { content: 'Building magic..'; }
      80%, 100% { content: 'Building magic...'; }
    }

    .loading-dots::after {
      content: '';
      animation: dots 1.5s steps(4, end) infinite;
    }

    @keyframes dots {
      0% { content: ''; }
      25% { content: '.'; }
      50% { content: '..'; }
      75% { content: '...'; }
    }

    /* ============================================
       INTERACTIVE BACKGROUND
    ============================================ */
    .bg-interactive {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .bg-gradient-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.5;
      transition: transform 0.3s ease-out, opacity 0.3s ease;
    }

    .orb-1 {
      width: 600px;
      height: 600px;
      background: linear-gradient(135deg, rgba(59, 159, 216, 0.3) 0%, rgba(0, 184, 148, 0.2) 100%);
      top: -200px;
      right: -200px;
    }

    .orb-2 {
      width: 500px;
      height: 500px;
      background: linear-gradient(135deg, rgba(0, 184, 148, 0.25) 0%, rgba(59, 159, 216, 0.15) 100%);
      bottom: -150px;
      left: -150px;
    }

    .orb-3 {
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, rgba(59, 159, 216, 0.2) 0%, transparent 70%);
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    /* Cursor follower */
    .cursor-glow {
      position: fixed;
      width: 400px;
      height: 400px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(59, 159, 216, 0.15) 0%, transparent 70%);
      pointer-events: none;
      z-index: 1;
      transform: translate(-50%, -50%);
      transition: opacity 0.3s ease;
      opacity: 0;
    }

    .cursor-glow.active {
      opacity: 1;
    }

    /* Floating particles */
    .particles {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
    }

    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: var(--primary-blue);
      border-radius: 50%;
      opacity: 0.3;
      animation: float 15s infinite ease-in-out;
    }

    .particle:nth-child(odd) {
      background: var(--success);
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) translateX(0); opacity: 0.3; }
      25% { transform: translateY(-30px) translateX(15px); opacity: 0.5; }
      50% { transform: translateY(-15px) translateX(-10px); opacity: 0.3; }
      75% { transform: translateY(-40px) translateX(20px); opacity: 0.4; }
    }

    /* ============================================
       MAIN LAYOUT
    ============================================ */
    .app-container {
      position: relative;
      z-index: 2;
      min-height: 100vh;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1.5rem;
    }

    /* ============================================
       HEADER / NAVIGATION
    ============================================ */
    header {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-light);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 0;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .logo img {
      height: 40px;
      width: auto;
    }

    .logo-text {
      display: flex;
      flex-direction: column;
    }

    .logo-title {
      font-size: 1.25rem;
      font-weight: 800;
      color: var(--dark-gray);
      letter-spacing: -0.02em;
    }

    .logo-subtitle {
      font-size: 0.65rem;
      font-weight: 600;
      color: var(--primary-blue);
      letter-spacing: 0.15em;
      text-transform: uppercase;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    /* ============================================
       BUTTONS
    ============================================ */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .btn:hover::before {
      opacity: 1;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-blue-dark) 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(59, 159, 216, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(59, 159, 216, 0.4);
    }

    .btn-secondary {
      background: var(--bg-white);
      color: var(--text-dark);
      border: 1px solid var(--border-light);
    }

    .btn-secondary:hover {
      background: var(--bg-light);
      border-color: var(--primary-blue);
      color: var(--primary-blue);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-medium);
      padding: 0.5rem;
    }

    .btn-ghost:hover {
      background: var(--bg-light);
      color: var(--primary-blue);
    }

    .btn-success {
      background: linear-gradient(135deg, var(--success) 0%, #00a884 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
    }

    .btn-success:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 184, 148, 0.4);
    }

    .btn-danger {
      background: transparent;
      color: var(--error);
      border: 1px solid var(--error);
    }

    .btn-danger:hover {
      background: var(--error);
      color: white;
    }

    .btn-small {
      padding: 0.5rem 1rem;
      font-size: 0.75rem;
      border-radius: 8px;
    }

    .btn-icon {
      width: 36px;
      height: 36px;
      padding: 0;
      border-radius: 10px;
    }

    /* ============================================
       STATS CARDS
    ============================================ */
    .stats-section {
      padding: 2rem 0;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
    }

    @media (max-width: 1024px) {
      .stats-grid { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 640px) {
      .stats-grid { grid-template-columns: 1fr; }
    }

    .stat-card {
      background: var(--bg-white);
      border-radius: 20px;
      padding: 1.75rem;
      position: relative;
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid var(--border-light);
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-blue), var(--success));
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-md);
    }

    .stat-card:hover::before {
      opacity: 1;
    }

    .stat-icon {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    .stat-icon.blue {
      background: linear-gradient(135deg, rgba(59, 159, 216, 0.15) 0%, rgba(59, 159, 216, 0.05) 100%);
    }

    .stat-icon.green {
      background: linear-gradient(135deg, rgba(0, 184, 148, 0.15) 0%, rgba(0, 184, 148, 0.05) 100%);
    }

    .stat-icon.orange {
      background: linear-gradient(135deg, rgba(253, 203, 110, 0.2) 0%, rgba(253, 203, 110, 0.05) 100%);
    }

    .stat-icon.purple {
      background: linear-gradient(135deg, rgba(162, 155, 254, 0.2) 0%, rgba(162, 155, 254, 0.05) 100%);
    }

    .stat-label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-medium);
      margin-bottom: 0.5rem;
    }

    .stat-value {
      font-size: 2.25rem;
      font-weight: 800;
      color: var(--text-dark);
      line-height: 1;
    }

    .stat-change {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.75rem;
      font-weight: 600;
      margin-top: 0.75rem;
      padding: 0.25rem 0.5rem;
      border-radius: 6px;
    }

    .stat-change.positive {
      color: var(--success);
      background: rgba(0, 184, 148, 0.1);
    }

    .stat-change.negative {
      color: var(--error);
      background: rgba(225, 112, 85, 0.1);
    }

    /* ============================================
       PAGES TABLE SECTION
    ============================================ */
    .pages-section {
      background: var(--bg-white);
      border-radius: 24px;
      overflow: hidden;
      border: 1px solid var(--border-light);
      box-shadow: var(--shadow-sm);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2rem;
      border-bottom: 1px solid var(--border-light);
      background: linear-gradient(135deg, var(--bg-light) 0%, var(--bg-white) 100%);
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .section-title h2 {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--text-dark);
    }

    .section-title .badge {
      background: var(--primary-blue);
      color: white;
      font-size: 0.7rem;
      font-weight: 700;
      padding: 0.25rem 0.6rem;
      border-radius: 20px;
    }

    /* Table Styles */
    .pages-table-wrapper {
      overflow-x: auto;
    }

    .pages-table {
      width: 100%;
      border-collapse: collapse;
    }

    .pages-table th {
      padding: 1rem 1.5rem;
      text-align: left;
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-medium);
      background: var(--bg-light);
      border-bottom: 1px solid var(--border-light);
      white-space: nowrap;
    }

    .pages-table td {
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid var(--border-light);
      vertical-align: middle;
    }

    .pages-table tbody tr {
      transition: all 0.2s ease;
    }

    .pages-table tbody tr:hover {
      background: linear-gradient(90deg, rgba(59, 159, 216, 0.03) 0%, transparent 100%);
    }

    .pages-table tbody tr:last-child td {
      border-bottom: none;
    }

    .page-name {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .page-name strong {
      font-weight: 600;
      color: var(--text-dark);
    }

    .page-name small {
      font-size: 0.75rem;
      color: var(--text-light);
    }

    /* Status Badge */
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.375rem 0.875rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .status-badge .dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
    }

    .status-live {
      background: rgba(0, 184, 148, 0.1);
      color: var(--success);
    }

    .status-live .dot {
      background: var(--success);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .status-draft {
      background: rgba(253, 203, 110, 0.15);
      color: #d4a017;
    }

    .status-draft .dot {
      background: var(--warning);
    }

    /* Page Link */
    .page-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--primary-blue);
      text-decoration: none;
      font-size: 0.875rem;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .page-link:hover {
      color: var(--primary-blue-dark);
      text-decoration: underline;
    }

    .page-link svg {
      width: 14px;
      height: 14px;
      opacity: 0;
      transform: translateX(-4px);
      transition: all 0.2s ease;
    }

    .page-link:hover svg {
      opacity: 1;
      transform: translateX(0);
    }

    /* Actions */
    .actions {
      display: flex;
      gap: 0.5rem;
    }

    /* Metrics in table */
    .metric {
      font-weight: 600;
      color: var(--text-dark);
    }

    .metric-secondary {
      font-size: 0.75rem;
      color: var(--text-light);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 5rem 2rem;
    }

    .empty-illustration {
      width: 180px;
      height: 180px;
      margin: 0 auto 2rem;
      background: linear-gradient(135deg, var(--bg-light) 0%, #e8f4f8 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
    }

    .empty-state h3 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 0.75rem;
    }

    .empty-state p {
      color: var(--text-medium);
      max-width: 400px;
      margin: 0 auto 2rem;
      line-height: 1.6;
    }

    /* ============================================
       MODALS
    ============================================ */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(45, 52, 54, 0.6);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 1.5rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .modal-overlay.active {
      display: flex;
      opacity: 1;
    }

    .modal {
      background: var(--bg-white);
      border-radius: 24px;
      width: 100%;
      max-width: 900px;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: var(--shadow-lg);
      transform: translateY(20px);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .modal-overlay.active .modal {
      transform: translateY(0);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2rem;
      border-bottom: 1px solid var(--border-light);
      background: linear-gradient(135deg, var(--bg-light) 0%, var(--bg-white) 100%);
    }

    .modal-header h2 {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--text-dark);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .modal-close {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      background: transparent;
      border: none;
      color: var(--text-medium);
      font-size: 1.25rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .modal-close:hover {
      background: var(--bg-light);
      color: var(--error);
    }

    .modal-body {
      padding: 2rem;
      overflow-y: auto;
      flex: 1;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 0.75rem;
      padding: 1.5rem 2rem;
      border-top: 1px solid var(--border-light);
      background: var(--bg-light);
    }

    /* Form Styles */
    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--text-dark);
    }

    .form-group label span {
      color: var(--error);
    }

    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 0.875rem 1rem;
      background: var(--bg-light);
      border: 2px solid var(--border-light);
      border-radius: 12px;
      color: var(--text-dark);
      font-size: 0.875rem;
      font-family: inherit;
      transition: all 0.2s ease;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--primary-blue);
      background: var(--bg-white);
      box-shadow: 0 0 0 4px rgba(59, 159, 216, 0.1);
    }

    .form-group input::placeholder,
    .form-group textarea::placeholder {
      color: var(--text-light);
    }

    .form-group textarea {
      min-height: 280px;
      font-family: 'SF Mono', 'Monaco', 'Menlo', monospace;
      font-size: 0.8125rem;
      line-height: 1.6;
      resize: vertical;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }

    @media (max-width: 640px) {
      .form-row { grid-template-columns: 1fr; }
    }

    .form-hint {
      font-size: 0.75rem;
      color: var(--text-light);
      margin-top: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.375rem;
    }

    /* Deploy Result */
    .deploy-result {
      background: linear-gradient(135deg, rgba(0, 184, 148, 0.1) 0%, rgba(0, 184, 148, 0.05) 100%);
      border: 2px solid var(--success);
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .deploy-result h4 {
      color: var(--success);
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .deploy-result p {
      color: var(--text-medium);
      font-size: 0.875rem;
      margin-bottom: 0.5rem;
    }

    .deploy-result a {
      color: var(--success);
      font-weight: 600;
      word-break: break-all;
    }

    /* ============================================
       ANALYTICS MODAL
    ============================================ */
    .analytics-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-bottom: 2rem;
    }

    @media (max-width: 640px) {
      .analytics-grid { grid-template-columns: 1fr; }
    }

    .analytics-card {
      background: linear-gradient(135deg, var(--bg-light) 0%, var(--bg-white) 100%);
      border: 1px solid var(--border-light);
      border-radius: 16px;
      padding: 1.5rem;
      text-align: center;
    }

    .analytics-card .label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-medium);
      margin-bottom: 0.5rem;
    }

    .analytics-card .value {
      font-size: 2rem;
      font-weight: 800;
      color: var(--text-dark);
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      border-bottom: 2px solid var(--border-light);
      padding-bottom: 0;
    }

    .tab {
      padding: 0.875rem 1.5rem;
      background: none;
      border: none;
      color: var(--text-medium);
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      position: relative;
      transition: all 0.2s ease;
    }

    .tab::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--primary-blue);
      transform: scaleX(0);
      transition: transform 0.2s ease;
    }

    .tab:hover {
      color: var(--text-dark);
    }

    .tab.active {
      color: var(--primary-blue);
    }

    .tab.active::after {
      transform: scaleX(1);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Leads Table */
    .leads-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }

    .leads-table th,
    .leads-table td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border-light);
    }

    .leads-table th {
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-medium);
      background: var(--bg-light);
    }

    .leads-table tbody tr:hover {
      background: var(--bg-light);
    }

    /* ============================================
       LOADING SPINNER
    ============================================ */
    .loading-spinner {
      display: inline-block;
      width: 18px;
      height: 18px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ============================================
       RESPONSIVE ADJUSTMENTS
    ============================================ */
    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }

      .header-content {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }

      .logo {
        justify-content: center;
      }

      .section-header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
        padding: 1.25rem;
      }

      .pages-table th,
      .pages-table td {
        padding: 1rem;
        font-size: 0.8rem;
      }

      .modal {
        margin: 0.5rem;
        max-height: 95vh;
        border-radius: 20px;
      }

      .modal-header,
      .modal-body,
      .modal-footer {
        padding: 1.25rem;
      }
    }

    /* Hide columns on mobile */
    @media (max-width: 1024px) {
      .pages-table .hide-mobile {
        display: none;
      }
    }

    /* ============================================
       SCROLLBAR STYLING
    ============================================ */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-light);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border-light);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-light);
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="unicorn-loader">
      <div class="unicorn-character">
        <!-- Tail -->
        <div class="unicorn-tail">
          <div class="tail-strand"></div>
          <div class="tail-strand"></div>
          <div class="tail-strand"></div>
        </div>

        <!-- Back Legs -->
        <div class="unicorn-leg-back left"></div>
        <div class="unicorn-leg-back right"></div>

        <!-- Body -->
        <div class="unicorn-body"></div>

        <!-- Front Legs (typing) -->
        <div class="unicorn-leg-front left"></div>
        <div class="unicorn-leg-front right"></div>

        <!-- Mane -->
        <div class="unicorn-mane">
          <div class="mane-strand"></div>
          <div class="mane-strand"></div>
          <div class="mane-strand"></div>
        </div>

        <!-- Head -->
        <div class="unicorn-head"></div>
        <div class="unicorn-ear"></div>
        <div class="unicorn-horn"></div>
        <div class="unicorn-eye"></div>
        <div class="unicorn-snout"></div>
      </div>

      <!-- Laptop -->
      <div class="laptop">
        <div class="laptop-screen">
          <div class="code-line"></div>
          <div class="code-line"></div>
          <div class="code-line"></div>
          <div class="code-line"></div>
        </div>
        <div class="laptop-base">
          <div class="laptop-touchpad"></div>
        </div>
      </div>
    </div>
    <div class="loading-text">Building magic<span class="loading-dots"></span></div>
  </div>

  <!-- Interactive Background -->
  <div class="bg-interactive">
    <div class="bg-gradient-orb orb-1"></div>
    <div class="bg-gradient-orb orb-2"></div>
    <div class="bg-gradient-orb orb-3"></div>
  </div>
  <div class="cursor-glow" id="cursorGlow"></div>
  <div class="particles" id="particles"></div>

  <!-- Main App -->
  <div class="app-container">
    <header>
      <div class="container">
        <div class="header-content">
          <div class="logo">
            <!-- Inline SVG Logo -->
            <svg width="45" height="40" viewBox="0 0 45 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M22.5 0L24.5 8H20.5L22.5 0Z" fill="url(#horn-gradient)"/>
              <ellipse cx="22.5" cy="20" rx="18" ry="14" fill="#3D4246"/>
              <text x="6" y="25" fill="white" font-family="Inter" font-weight="800" font-size="14">UN</text>
              <path d="M22.5 4C22.5 4 24 6 24 8C24 10 22.5 12 22.5 12C22.5 12 21 10 21 8C21 6 22.5 4 22.5 4Z" fill="#5BB5E8"/>
              <defs>
                <linearGradient id="horn-gradient" x1="22.5" y1="0" x2="22.5" y2="12" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#5BB5E8"/>
                  <stop offset="1" stop-color="#3B9FD8"/>
                </linearGradient>
              </defs>
            </svg>
            <div class="logo-text">
              <span class="logo-title">UNICORN</span>
              <span class="logo-subtitle">Landing Pages</span>
            </div>
          </div>
          <div class="header-actions">
            <button class="btn btn-primary" onclick="openCreateModal()">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="8" y1="2" x2="8" y2="14"/>
                <line x1="2" y1="8" x2="14" y2="8"/>
              </svg>
              New Landing Page
            </button>
          </div>
        </div>
      </div>
    </header>

    <main class="container">
      <!-- Stats Section -->
      <section class="stats-section">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon blue">üìÑ</div>
            <div class="stat-label">Total Pages</div>
            <div class="stat-value" id="statPages">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon green">üü¢</div>
            <div class="stat-label">Live Pages</div>
            <div class="stat-value" id="statLive">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon orange">üëÅÔ∏è</div>
            <div class="stat-label">Total Views</div>
            <div class="stat-value" id="statViews">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon purple">üéØ</div>
            <div class="stat-label">Total Leads</div>
            <div class="stat-value" id="statLeads">0</div>
          </div>
        </div>
      </section>

      <!-- Pages Section -->
      <section class="pages-section">
        <div class="section-header">
          <div class="section-title">
            <h2>Landing Pages</h2>
            <span class="badge" id="pageCount">0</span>
          </div>
          <button class="btn btn-secondary btn-small" onclick="loadPages()">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 7a6 6 0 1 1 1 3.5"/>
              <path d="M1 11V7h4"/>
            </svg>
            Refresh
          </button>
        </div>
        <div id="pagesContainer">
          <div class="empty-state">
            <div class="empty-illustration">ü¶Ñ</div>
            <h3>No landing pages yet</h3>
            <p>Create your first landing page by pasting HTML from a Claude artifact. It's magical!</p>
            <button class="btn btn-primary" onclick="openCreateModal()">Create Your First Page</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Create/Edit Modal -->
  <div class="modal-overlay" id="createModal">
    <div class="modal">
      <div class="modal-header">
        <h2 id="modalTitle">
          <span>‚ú®</span>
          New Landing Page
        </h2>
        <button class="modal-close" onclick="closeCreateModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div id="deployResult"></div>

        <form id="pageForm">
          <input type="hidden" id="pageId">

          <div class="form-row">
            <div class="form-group">
              <label for="pageName">Page Name <span>*</span></label>
              <input type="text" id="pageName" placeholder="e.g., Summer Sale Landing Page" required>
            </div>
            <div class="form-group">
              <label for="clientName">Client Name</label>
              <input type="text" id="clientName" placeholder="e.g., Acme Corp">
            </div>
          </div>

          <div class="form-group">
            <label for="pageSlug">URL Slug</label>
            <input type="text" id="pageSlug" placeholder="summer-sale">
            <div class="form-hint">
              <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                <circle cx="6" cy="6" r="5" fill="none" stroke="currentColor"/>
                <text x="6" y="9" text-anchor="middle" font-size="8">i</text>
              </svg>
              Leave blank to auto-generate from name
            </div>
          </div>

          <div class="form-group">
            <label for="htmlContent">HTML Content <span>*</span></label>
            <textarea id="htmlContent" placeholder="Paste your landing page HTML here..." required></textarea>
            <div class="form-hint">
              <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                <circle cx="6" cy="6" r="5" fill="none" stroke="currentColor"/>
                <text x="6" y="9" text-anchor="middle" font-size="8">i</text>
              </svg>
              Paste the full HTML from your Claude artifact. Tracking code will be auto-injected.
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="metaTitle">Meta Title</label>
              <input type="text" id="metaTitle" placeholder="Page title for SEO">
            </div>
            <div class="form-group">
              <label for="metaDescription">Meta Description</label>
              <input type="text" id="metaDescription" placeholder="Page description for SEO">
            </div>
          </div>

          <div class="form-group">
            <label for="trackingPixel">Custom Tracking Code</label>
            <textarea id="trackingPixel" style="min-height: 100px; font-family: 'SF Mono', Monaco, monospace;" placeholder="Optional: Facebook Pixel, Google Analytics, etc."></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeCreateModal()">Cancel</button>
        <button type="button" class="btn btn-secondary" onclick="saveDraft()" id="saveDraftBtn">Save as Draft</button>
        <button type="button" class="btn btn-success" onclick="deployPage()" id="deployBtn">
          üöÄ Deploy Live
        </button>
      </div>
    </div>
  </div>

  <!-- Analytics Modal -->
  <div class="modal-overlay" id="analyticsModal">
    <div class="modal" style="max-width: 1000px">
      <div class="modal-header">
        <h2 id="analyticsTitle">
          <span>üìä</span>
          Page Analytics
        </h2>
        <button class="modal-close" onclick="closeAnalyticsModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="tabs">
          <button class="tab active" onclick="switchTab(event, 'overview')">Overview</button>
          <button class="tab" onclick="switchTab(event, 'leads')">Leads</button>
          <button class="tab" onclick="switchTab(event, 'abtest')">A/B Testing</button>
        </div>

        <div id="tabOverview" class="tab-content active">
          <div class="analytics-grid" id="analyticsStats">
            <div class="analytics-card">
              <div class="label">Page Views</div>
              <div class="value" id="aViews">0</div>
            </div>
            <div class="analytics-card">
              <div class="label">Leads</div>
              <div class="value" id="aLeads">0</div>
            </div>
            <div class="analytics-card">
              <div class="label">Conversion Rate</div>
              <div class="value" id="aConversion">0%</div>
            </div>
          </div>

          <h4 style="margin-bottom: 1rem; font-weight: 600;">Traffic Sources</h4>
          <div id="trafficSources"></div>
        </div>

        <div id="tabLeads" class="tab-content">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
            <h4 style="font-weight: 600;">Captured Leads</h4>
            <button class="btn btn-small btn-secondary" onclick="exportLeads()">
              <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M7 2v8M4 7l3 3 3-3M2 12h10"/>
              </svg>
              Export CSV
            </button>
          </div>
          <div id="leadsTable"></div>
        </div>

        <div id="tabAbtest" class="tab-content">
          <h4 style="margin-bottom: 1.5rem; font-weight: 600;">A/B Test Results</h4>
          <div id="abtestResults"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ============================================
    // INTERACTIVE BACKGROUND & CURSOR EFFECTS
    // ============================================
    const cursorGlow = document.getElementById('cursorGlow');
    const orbs = document.querySelectorAll('.bg-gradient-orb');
    let mouseX = 0, mouseY = 0;
    let orbPositions = [
      { x: 0, y: 0 },
      { x: 0, y: 0 },
      { x: 0, y: 0 }
    ];

    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;

      // Update cursor glow position
      cursorGlow.style.left = mouseX + 'px';
      cursorGlow.style.top = mouseY + 'px';
      cursorGlow.classList.add('active');

      // Subtle orb movement based on cursor
      const centerX = window.innerWidth / 2;
      const centerY = window.innerHeight / 2;
      const deltaX = (mouseX - centerX) / centerX;
      const deltaY = (mouseY - centerY) / centerY;

      orbs[0].style.transform = `translate(${deltaX * 30}px, ${deltaY * 30}px)`;
      orbs[1].style.transform = `translate(${-deltaX * 20}px, ${-deltaY * 20}px)`;
      orbs[2].style.transform = `translate(${deltaX * 15}px, ${-deltaY * 15}px)`;
    });

    document.addEventListener('mouseleave', () => {
      cursorGlow.classList.remove('active');
    });

    // Create floating particles
    function createParticles() {
      const container = document.getElementById('particles');
      const particleCount = 20;

      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 15 + 's';
        particle.style.animationDuration = (15 + Math.random() * 10) + 's';
        container.appendChild(particle);
      }
    }
    createParticles();

    // ============================================
    // LOADING SCREEN
    // ============================================
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loadingScreen').classList.add('hidden');
      }, 1500);
    });

    // ============================================
    // APP LOGIC
    // ============================================
    let currentPageId = null;
    let pages = [];

    // Load pages on startup
    loadPages();

    async function loadPages() {
      try {
        const res = await fetch('/api/pages');
        pages = await res.json();
        renderPages();
        updateStats();
      } catch (error) {
        console.error('Failed to load pages:', error);
      }
    }

    function updateStats() {
      document.getElementById('statPages').textContent = pages.length;
      document.getElementById('statLive').textContent = pages.filter(p => p.status === 'live').length;
      document.getElementById('statViews').textContent = formatNumber(pages.reduce((sum, p) => sum + (p.view_count || 0), 0));
      document.getElementById('statLeads').textContent = formatNumber(pages.reduce((sum, p) => sum + (p.lead_count || 0), 0));
      document.getElementById('pageCount').textContent = pages.length;
    }

    function formatNumber(num) {
      if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
      if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
      return num.toString();
    }

    function renderPages() {
      const container = document.getElementById('pagesContainer');

      if (pages.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-illustration">ü¶Ñ</div>
            <h3>No landing pages yet</h3>
            <p>Create your first landing page by pasting HTML from a Claude artifact. It's magical!</p>
            <button class="btn btn-primary" onclick="openCreateModal()">Create Your First Page</button>
          </div>
        `;
        return;
      }

      container.innerHTML = `
        <div class="pages-table-wrapper">
          <table class="pages-table">
            <thead>
              <tr>
                <th>Name</th>
                <th class="hide-mobile">Client</th>
                <th>Status</th>
                <th>Views</th>
                <th>Leads</th>
                <th class="hide-mobile">Conv. Rate</th>
                <th>URL</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              ${pages.map(page => {
                const convRate = page.view_count > 0
                  ? ((page.lead_count / page.view_count) * 100).toFixed(1) + '%'
                  : '‚Äî';
                const liveUrl = page.status === 'live'
                  ? `${getBaseUrl()}/${page.slug}/`
                  : null;

                return `
                  <tr>
                    <td>
                      <div class="page-name">
                        <strong>${escapeHtml(page.name)}</strong>
                        <small>${page.slug}</small>
                      </div>
                    </td>
                    <td class="hide-mobile">${escapeHtml(page.client_name || '‚Äî')}</td>
                    <td>
                      <span class="status-badge status-${page.status}">
                        <span class="dot"></span>
                        ${page.status === 'live' ? 'Live' : 'Draft'}
                      </span>
                    </td>
                    <td class="metric">${formatNumber(page.view_count || 0)}</td>
                    <td class="metric">${formatNumber(page.lead_count || 0)}</td>
                    <td class="hide-mobile metric">${convRate}</td>
                    <td>
                      ${liveUrl
                        ? `<a href="${liveUrl}" target="_blank" class="page-link">
                            ${page.slug}
                            <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 4h6v6M12 4L4 12"/>
                            </svg>
                          </a>`
                        : '<span class="metric-secondary">‚Äî</span>'}
                    </td>
                    <td>
                      <div class="actions">
                        <button class="btn btn-icon btn-ghost" onclick="openAnalytics('${page.id}')" title="Analytics">
                          üìä
                        </button>
                        <button class="btn btn-icon btn-ghost" onclick="editPage('${page.id}')" title="Edit">
                          ‚úèÔ∏è
                        </button>
                        ${page.status !== 'live'
                          ? `<button class="btn btn-icon btn-ghost" onclick="quickDeploy('${page.id}')" title="Deploy" style="color: var(--success)">üöÄ</button>`
                          : ''}
                        <button class="btn btn-icon btn-ghost" onclick="deletePage('${page.id}')" title="Delete" style="color: var(--error)">
                          üóëÔ∏è
                        </button>
                      </div>
                    </td>
                  </tr>
                `;
              }).join('')}
            </tbody>
          </table>
        </div>
      `;
    }

    function getBaseUrl() {
      return localStorage.getItem('pagesBaseUrl') || 'https://maxwellfinn.github.io/unicorn-landing-pages-live';
    }

    function openCreateModal() {
      document.getElementById('modalTitle').innerHTML = '<span>‚ú®</span> New Landing Page';
      document.getElementById('pageForm').reset();
      document.getElementById('pageId').value = '';
      document.getElementById('deployResult').innerHTML = '';
      document.getElementById('saveDraftBtn').style.display = 'inline-flex';
      document.getElementById('createModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeCreateModal() {
      document.getElementById('createModal').classList.remove('active');
      document.body.style.overflow = '';
    }

    async function editPage(id) {
      const page = pages.find(p => p.id === id);
      if (!page) return;

      document.getElementById('modalTitle').innerHTML = '<span>‚úèÔ∏è</span> Edit Landing Page';
      document.getElementById('pageId').value = page.id;
      document.getElementById('pageName').value = page.name;
      document.getElementById('clientName').value = page.client_name || '';
      document.getElementById('pageSlug').value = page.slug;
      document.getElementById('htmlContent').value = page.html_content;
      document.getElementById('metaTitle').value = page.meta_title || '';
      document.getElementById('metaDescription').value = page.meta_description || '';
      document.getElementById('trackingPixel').value = page.tracking_pixel || '';
      document.getElementById('deployResult').innerHTML = '';
      document.getElementById('saveDraftBtn').style.display = page.status === 'live' ? 'none' : 'inline-flex';

      document.getElementById('createModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    async function saveDraft() {
      const id = document.getElementById('pageId').value;
      const data = getFormData();

      try {
        const url = id ? `/api/pages/${id}` : '/api/pages';
        const method = id ? 'PUT' : 'POST';

        const res = await fetch(url, {
          method,
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        if (!res.ok) {
          const err = await res.json();
          throw new Error(err.error);
        }

        await loadPages();
        closeCreateModal();
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }

    async function deployPage() {
      const btn = document.getElementById('deployBtn');
      const originalText = btn.innerHTML;
      btn.innerHTML = '<span class="loading-spinner"></span> Deploying...';
      btn.disabled = true;

      try {
        const data = getFormData();
        const id = document.getElementById('pageId').value;

        let res;
        if (id) {
          await fetch(`/api/pages/${id}`, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
          });
          res = await fetch(`/api/pages/${id}/deploy`, { method: 'POST' });
        } else {
          res = await fetch('/api/deploy', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
          });
        }

        const result = await res.json();

        if (!res.ok) {
          throw new Error(result.error);
        }

        document.getElementById('deployResult').innerHTML = `
          <div class="deploy-result">
            <h4>‚úÖ Successfully Deployed!</h4>
            <p>Your landing page is live at:</p>
            <p><a href="${result.liveUrl}" target="_blank">${result.liveUrl}</a></p>
          </div>
        `;

        document.getElementById('pageId').value = result.page.id;
        document.getElementById('saveDraftBtn').style.display = 'none';

        await loadPages();
      } catch (error) {
        alert('Deployment failed: ' + error.message);
      } finally {
        btn.innerHTML = originalText;
        btn.disabled = false;
      }
    }

    async function quickDeploy(id) {
      if (!confirm('Deploy this page live?')) return;

      try {
        const res = await fetch(`/api/pages/${id}/deploy`, { method: 'POST' });
        const result = await res.json();

        if (!res.ok) throw new Error(result.error);

        alert('Deployed! Live at: ' + result.liveUrl);
        await loadPages();
      } catch (error) {
        alert('Deployment failed: ' + error.message);
      }
    }

    async function deletePage(id) {
      if (!confirm('Are you sure you want to delete this page? This will also remove it from GitHub Pages.')) {
        return;
      }

      try {
        const res = await fetch(`/api/pages/${id}`, { method: 'DELETE' });
        if (!res.ok) {
          const err = await res.json();
          throw new Error(err.error);
        }
        await loadPages();
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }

    function getFormData() {
      return {
        name: document.getElementById('pageName').value,
        client_name: document.getElementById('clientName').value || null,
        slug: document.getElementById('pageSlug').value || null,
        html_content: document.getElementById('htmlContent').value,
        meta_title: document.getElementById('metaTitle').value || null,
        meta_description: document.getElementById('metaDescription').value || null,
        tracking_pixel: document.getElementById('trackingPixel').value || null
      };
    }

    // Analytics Modal
    async function openAnalytics(id) {
      currentPageId = id;
      const page = pages.find(p => p.id === id);
      document.getElementById('analyticsTitle').innerHTML = `<span>üìä</span> Analytics: ${escapeHtml(page?.name || 'Page')}`;
      document.getElementById('analyticsModal').classList.add('active');
      document.body.style.overflow = 'hidden';

      // Reset to overview tab
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      document.querySelector('.tab').classList.add('active');
      document.getElementById('tabOverview').classList.add('active');

      await loadAnalytics(id);
      await loadLeads(id);
      await loadABResults(id);
    }

    function closeAnalyticsModal() {
      document.getElementById('analyticsModal').classList.remove('active');
      document.body.style.overflow = '';
      currentPageId = null;
    }

    function switchTab(event, tab) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

      event.target.classList.add('active');
      document.getElementById(`tab${tab.charAt(0).toUpperCase() + tab.slice(1)}`).classList.add('active');
    }

    async function loadAnalytics(id) {
      try {
        const res = await fetch(`/api/pages/${id}/analytics`);
        const data = await res.json();

        document.getElementById('aViews').textContent = formatNumber(data.summary.total_views);
        document.getElementById('aLeads').textContent = formatNumber(data.summary.total_leads);
        document.getElementById('aConversion').textContent = data.summary.conversion_rate + '%';

        const sources = data.views_by_source || [];
        document.getElementById('trafficSources').innerHTML = sources.length > 0
          ? `<table class="leads-table">
              <thead><tr><th>Source</th><th>Views</th></tr></thead>
              <tbody>
                ${sources.map(s => `<tr><td>${escapeHtml(s.source)}</td><td class="metric">${formatNumber(s.views)}</td></tr>`).join('')}
              </tbody>
            </table>`
          : '<p style="color: var(--text-light); text-align: center; padding: 2rem;">No traffic data yet</p>';
      } catch (error) {
        console.error('Failed to load analytics:', error);
      }
    }

    async function loadLeads(id) {
      try {
        const res = await fetch(`/api/pages/${id}/leads`);
        const leads = await res.json();

        document.getElementById('leadsTable').innerHTML = leads.length > 0
          ? `<table class="leads-table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Email</th>
                  <th>Name</th>
                  <th>Phone</th>
                  <th>Source</th>
                </tr>
              </thead>
              <tbody>
                ${leads.map(l => `
                  <tr>
                    <td>${new Date(l.created_at).toLocaleDateString()}</td>
                    <td>${escapeHtml(l.email || '‚Äî')}</td>
                    <td>${escapeHtml(l.name || '‚Äî')}</td>
                    <td>${escapeHtml(l.phone || '‚Äî')}</td>
                    <td>${escapeHtml(l.utm_source || 'direct')}</td>
                  </tr>
                `).join('')}
              </tbody>
            </table>`
          : '<p style="color: var(--text-light); text-align: center; padding: 2rem;">No leads captured yet</p>';
      } catch (error) {
        console.error('Failed to load leads:', error);
      }
    }

    async function loadABResults(id) {
      try {
        const res = await fetch(`/api/pages/${id}/ab-results`);
        const data = await res.json();

        const allVariants = [data.control, ...(data.variants || [])];

        document.getElementById('abtestResults').innerHTML = `
          <table class="leads-table">
            <thead>
              <tr>
                <th>Variant</th>
                <th>Views</th>
                <th>Conversions</th>
                <th>Conv. Rate</th>
              </tr>
            </thead>
            <tbody>
              ${allVariants.map(v => `
                <tr>
                  <td>${escapeHtml(v.name || v.variant_name)}</td>
                  <td class="metric">${formatNumber(v.views)}</td>
                  <td class="metric">${formatNumber(v.conversions)}</td>
                  <td class="metric">${v.conversion_rate}%</td>
                </tr>
              `).join('')}
            </tbody>
          </table>
          <p style="margin-top: 1.5rem; color: var(--text-light); font-size: 0.875rem;">
            To add variants, use the API: POST /api/pages/${id}/variants
          </p>
        `;
      } catch (error) {
        console.error('Failed to load A/B results:', error);
      }
    }

    function exportLeads() {
      if (currentPageId) {
        window.open(`/api/pages/${currentPageId}/leads/export`, '_blank');
      }
    }

    function escapeHtml(text) {
      if (!text) return '';
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Close modals on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeCreateModal();
        closeAnalyticsModal();
      }
    });

    // Close modals on overlay click
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          closeCreateModal();
          closeAnalyticsModal();
        }
      });
    });
  </script>
</body>
</html>
