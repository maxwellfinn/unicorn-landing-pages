<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Landing Pages | Unicorn Marketers</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-blue: #3B9FD8;
      --primary-blue-dark: #2d7fb0;
      --primary-blue-light: #5bb5e8;
      --dark-gray: #3D4246;
      --text-dark: #2D3436;
      --text-medium: #636E72;
      --text-light: #B2BEC3;
      --bg-white: #FFFFFF;
      --bg-light: #F8FAFB;
      --bg-sidebar: #1a1d21;
      --bg-sidebar-hover: #2a2d32;
      --border-light: #E8EDEF;
      --success: #00B894;
      --warning: #FDCB6E;
      --error: #E17055;
      --shadow-sm: 0 2px 8px rgba(59, 159, 216, 0.08);
      --shadow-md: 0 8px 30px rgba(59, 159, 216, 0.12);
      --shadow-lg: 0 20px 60px rgba(59, 159, 216, 0.15);
      --sidebar-width: 260px;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-light);
      color: var(--text-dark);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ============================================
       LOADING SCREEN
    ============================================ */
    .loading-screen {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #f8fafb 0%, #e8f4f8 100%);
      z-index: 9999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    .loading-screen.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    .unicorn-loader {
      width: 200px;
      height: 200px;
      position: relative;
    }

    .unicorn-character {
      position: absolute;
      width: 120px;
      height: 100px;
      left: 50%;
      transform: translateX(-50%);
      top: 20px;
    }

    .unicorn-body {
      position: absolute;
      width: 60px;
      height: 45px;
      background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
      border-radius: 30px 30px 25px 25px;
      top: 35px;
      left: 30px;
      box-shadow: inset -5px -5px 10px rgba(0,0,0,0.05);
    }

    .unicorn-head {
      position: absolute;
      width: 35px;
      height: 32px;
      background: linear-gradient(135deg, #fff 0%, #f5f5f5 100%);
      border-radius: 50% 50% 45% 45%;
      top: 20px;
      left: 65px;
    }

    .unicorn-horn {
      position: absolute;
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-bottom: 25px solid var(--primary-blue);
      top: -2px;
      left: 75px;
      transform: rotate(15deg);
      animation: hornGlow 1.5s ease-in-out infinite;
    }

    @keyframes hornGlow {
      0%, 100% { filter: drop-shadow(0 0 3px var(--primary-blue)); }
      50% { filter: drop-shadow(0 0 8px var(--primary-blue-light)); }
    }

    .unicorn-ear {
      position: absolute;
      width: 12px;
      height: 16px;
      background: #fff;
      border-radius: 50% 50% 0 0;
      top: 12px;
      left: 68px;
      transform: rotate(-15deg);
    }

    .unicorn-mane {
      position: absolute;
      top: 25px;
      left: 55px;
    }

    .mane-strand {
      position: absolute;
      width: 8px;
      height: 20px;
      border-radius: 4px;
      animation: maneWave 1s ease-in-out infinite;
    }

    .mane-strand:nth-child(1) { background: var(--primary-blue); left: 0; }
    .mane-strand:nth-child(2) { background: #5bb5e8; left: 6px; animation-delay: 0.1s; height: 25px; top: -3px; }
    .mane-strand:nth-child(3) { background: #00B894; left: 12px; animation-delay: 0.2s; height: 22px; top: -1px; }

    @keyframes maneWave {
      0%, 100% { transform: rotate(-5deg); }
      50% { transform: rotate(5deg); }
    }

    .unicorn-eye {
      position: absolute;
      width: 6px;
      height: 6px;
      background: var(--dark-gray);
      border-radius: 50%;
      top: 32px;
      left: 85px;
      animation: blink 3s ease-in-out infinite;
    }

    @keyframes blink {
      0%, 90%, 100% { transform: scaleY(1); }
      95% { transform: scaleY(0.1); }
    }

    .unicorn-snout {
      position: absolute;
      width: 4px;
      height: 3px;
      background: #ffb6c1;
      border-radius: 50%;
      top: 42px;
      left: 92px;
    }

    .unicorn-leg-front {
      position: absolute;
      width: 10px;
      height: 20px;
      background: #fff;
      border-radius: 5px;
      top: 70px;
    }

    .unicorn-leg-front.left {
      left: 45px;
      animation: typeLeft 0.3s ease-in-out infinite;
    }

    .unicorn-leg-front.right {
      left: 58px;
      animation: typeRight 0.3s ease-in-out infinite 0.15s;
    }

    @keyframes typeLeft {
      0%, 100% { transform: translateY(0) rotate(-5deg); }
      50% { transform: translateY(-8px) rotate(-15deg); }
    }

    @keyframes typeRight {
      0%, 100% { transform: translateY(0) rotate(5deg); }
      50% { transform: translateY(-8px) rotate(15deg); }
    }

    .unicorn-leg-back {
      position: absolute;
      width: 10px;
      height: 18px;
      background: #f5f5f5;
      border-radius: 5px;
      top: 72px;
    }

    .unicorn-leg-back.left { left: 32px; }
    .unicorn-leg-back.right { left: 75px; }

    .unicorn-tail {
      position: absolute;
      top: 50px;
      left: 15px;
    }

    .tail-strand {
      position: absolute;
      width: 6px;
      height: 25px;
      border-radius: 3px;
      animation: tailWag 1.2s ease-in-out infinite;
      transform-origin: top;
    }

    .tail-strand:nth-child(1) { background: var(--primary-blue); left: 0; }
    .tail-strand:nth-child(2) { background: #5bb5e8; left: 5px; animation-delay: 0.1s; }
    .tail-strand:nth-child(3) { background: #00B894; left: 10px; animation-delay: 0.2s; }

    @keyframes tailWag {
      0%, 100% { transform: rotate(-15deg); }
      50% { transform: rotate(15deg); }
    }

    .laptop {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
    }

    .laptop-screen {
      width: 80px;
      height: 50px;
      background: linear-gradient(135deg, #2d3436 0%, #3d4246 100%);
      border-radius: 4px 4px 0 0;
      border: 3px solid #636e72;
      position: relative;
      overflow: hidden;
    }

    .laptop-screen::before {
      content: '';
      position: absolute;
      inset: 4px;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
      border-radius: 2px;
    }

    .code-line {
      position: absolute;
      height: 3px;
      border-radius: 1px;
      animation: codePulse 0.8s ease-in-out infinite;
    }

    .code-line:nth-child(1) { width: 25px; background: var(--primary-blue); top: 10px; left: 8px; }
    .code-line:nth-child(2) { width: 35px; background: #00B894; top: 17px; left: 8px; animation-delay: 0.2s; }
    .code-line:nth-child(3) { width: 20px; background: #FDCB6E; top: 24px; left: 8px; animation-delay: 0.4s; }
    .code-line:nth-child(4) { width: 30px; background: var(--primary-blue-light); top: 31px; left: 8px; animation-delay: 0.6s; }

    @keyframes codePulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    .laptop-base {
      width: 90px;
      height: 6px;
      background: linear-gradient(to bottom, #b2bec3, #636e72);
      border-radius: 0 0 4px 4px;
      margin-left: -5px;
    }

    .loading-text {
      margin-top: 30px;
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-medium);
    }

    .loading-dots::after {
      content: '';
      animation: dots 1.5s steps(4, end) infinite;
    }

    @keyframes dots {
      0% { content: ''; }
      25% { content: '.'; }
      50% { content: '..'; }
      75% { content: '...'; }
    }

    /* ============================================
       INTERACTIVE BACKGROUND
    ============================================ */
    .bg-interactive {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .bg-gradient-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.4;
      transition: transform 0.3s ease-out;
    }

    .orb-1 {
      width: 500px;
      height: 500px;
      background: linear-gradient(135deg, rgba(59, 159, 216, 0.25) 0%, rgba(0, 184, 148, 0.15) 100%);
      top: -150px;
      right: -100px;
    }

    .orb-2 {
      width: 400px;
      height: 400px;
      background: linear-gradient(135deg, rgba(0, 184, 148, 0.2) 0%, rgba(59, 159, 216, 0.1) 100%);
      bottom: -100px;
      left: 200px;
    }

    .cursor-glow {
      position: fixed;
      width: 350px;
      height: 350px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(59, 159, 216, 0.12) 0%, transparent 70%);
      pointer-events: none;
      z-index: 1;
      transform: translate(-50%, -50%);
      transition: opacity 0.3s ease;
      opacity: 0;
    }

    .cursor-glow.active {
      opacity: 1;
    }

    /* ============================================
       LAYOUT - SIDEBAR + MAIN
    ============================================ */
    .app-layout {
      display: flex;
      min-height: 100vh;
      position: relative;
      z-index: 2;
    }

    /* ============================================
       SIDEBAR
    ============================================ */
    .sidebar {
      width: var(--sidebar-width);
      background: var(--bg-sidebar);
      color: #fff;
      display: flex;
      flex-direction: column;
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      z-index: 100;
      transition: transform 0.3s ease;
    }

    .sidebar-header {
      padding: 1.5rem;
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }

    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .sidebar-logo img {
      height: 38px;
      width: auto;
      filter: brightness(0) invert(1);
    }

    .sidebar-nav {
      flex: 1;
      padding: 1rem 0;
      overflow-y: auto;
    }

    .nav-section {
      padding: 0 0.75rem;
      margin-bottom: 1.5rem;
    }

    .nav-section-title {
      font-size: 0.65rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: rgba(255,255,255,0.4);
      padding: 0.5rem 0.75rem;
      margin-bottom: 0.25rem;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      border-radius: 10px;
      color: rgba(255,255,255,0.7);
      text-decoration: none;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-bottom: 0.25rem;
    }

    .nav-item:hover {
      background: var(--bg-sidebar-hover);
      color: #fff;
    }

    .nav-item.active {
      background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-blue-dark) 100%);
      color: #fff;
    }

    .nav-item svg {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }

    .nav-item .badge {
      margin-left: auto;
      background: rgba(255,255,255,0.15);
      color: rgba(255,255,255,0.8);
      font-size: 0.7rem;
      font-weight: 600;
      padding: 0.2rem 0.5rem;
      border-radius: 10px;
    }

    .nav-item.active .badge {
      background: rgba(255,255,255,0.25);
      color: #fff;
    }

    .sidebar-footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid rgba(255,255,255,0.08);
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--primary-blue) 0%, var(--success) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.875rem;
    }

    .user-details {
      flex: 1;
      min-width: 0;
    }

    .user-name {
      font-size: 0.875rem;
      font-weight: 600;
      color: #fff;
    }

    .user-role {
      font-size: 0.7rem;
      color: rgba(255,255,255,0.5);
    }

    /* ============================================
       MAIN CONTENT
    ============================================ */
    .main-content {
      flex: 1;
      margin-left: var(--sidebar-width);
      min-height: 100vh;
    }

    .main-header {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-light);
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 50;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .page-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-dark);
    }

    .main-body {
      padding: 2rem;
    }

    /* ============================================
       BUTTONS
    ============================================ */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-blue-dark) 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(59, 159, 216, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(59, 159, 216, 0.4);
    }

    .btn-secondary {
      background: var(--bg-white);
      color: var(--text-dark);
      border: 1px solid var(--border-light);
    }

    .btn-secondary:hover {
      background: var(--bg-light);
      border-color: var(--primary-blue);
      color: var(--primary-blue);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-medium);
      padding: 0.5rem;
    }

    .btn-ghost:hover {
      background: var(--bg-light);
      color: var(--primary-blue);
    }

    .btn-success {
      background: linear-gradient(135deg, var(--success) 0%, #00a884 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
    }

    .btn-success:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 184, 148, 0.4);
    }

    .btn-small {
      padding: 0.5rem 1rem;
      font-size: 0.75rem;
      border-radius: 8px;
    }

    .btn-icon {
      width: 36px;
      height: 36px;
      padding: 0;
      border-radius: 10px;
    }

    /* ============================================
       STATS CARDS
    ============================================ */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    @media (max-width: 1200px) {
      .stats-grid { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 768px) {
      .stats-grid { grid-template-columns: 1fr; }
    }

    .stat-card {
      background: var(--bg-white);
      border-radius: 16px;
      padding: 1.5rem;
      border: 1px solid var(--border-light);
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-md);
    }

    .stat-icon {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      margin-bottom: 1rem;
    }

    .stat-icon.blue { background: rgba(59, 159, 216, 0.1); }
    .stat-icon.green { background: rgba(0, 184, 148, 0.1); }
    .stat-icon.orange { background: rgba(253, 203, 110, 0.15); }
    .stat-icon.purple { background: rgba(162, 155, 254, 0.15); }

    .stat-label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-medium);
      margin-bottom: 0.5rem;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 800;
      color: var(--text-dark);
    }

    /* ============================================
       PAGES SECTION
    ============================================ */
    .section-card {
      background: var(--bg-white);
      border-radius: 20px;
      border: 1px solid var(--border-light);
      overflow: hidden;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid var(--border-light);
      background: var(--bg-light);
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .section-title h2 {
      font-size: 1.125rem;
      font-weight: 700;
      color: var(--text-dark);
    }

    .section-title .badge {
      background: var(--primary-blue);
      color: white;
      font-size: 0.7rem;
      font-weight: 700;
      padding: 0.2rem 0.5rem;
      border-radius: 10px;
    }

    /* Pages Table */
    .pages-table-wrapper {
      overflow-x: auto;
    }

    .pages-table {
      width: 100%;
      border-collapse: collapse;
    }

    .pages-table th {
      padding: 1rem 1.25rem;
      text-align: left;
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-medium);
      background: var(--bg-light);
      border-bottom: 1px solid var(--border-light);
    }

    .pages-table td {
      padding: 1rem 1.25rem;
      border-bottom: 1px solid var(--border-light);
      vertical-align: middle;
    }

    .pages-table tbody tr {
      transition: background 0.2s ease;
    }

    .pages-table tbody tr:hover {
      background: rgba(59, 159, 216, 0.03);
    }

    .pages-table tbody tr:last-child td {
      border-bottom: none;
    }

    .page-name {
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

    .page-name strong {
      font-weight: 600;
      color: var(--text-dark);
    }

    .page-name small {
      font-size: 0.75rem;
      color: var(--text-light);
    }

    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.35rem 0.75rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .status-badge .dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
    }

    .status-live {
      background: rgba(0, 184, 148, 0.1);
      color: var(--success);
    }

    .status-live .dot {
      background: var(--success);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .status-draft {
      background: rgba(253, 203, 110, 0.15);
      color: #d4a017;
    }

    .status-draft .dot {
      background: var(--warning);
    }

    .page-link {
      color: var(--primary-blue);
      text-decoration: none;
      font-size: 0.875rem;
      font-weight: 500;
    }

    .page-link:hover {
      text-decoration: underline;
    }

    .actions {
      display: flex;
      gap: 0.375rem;
    }

    .metric {
      font-weight: 600;
      color: var(--text-dark);
    }

    .metric-secondary {
      color: var(--text-light);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
    }

    .empty-illustration {
      width: 140px;
      height: 140px;
      margin: 0 auto 1.5rem;
      background: linear-gradient(135deg, var(--bg-light) 0%, #e8f4f8 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3.5rem;
    }

    .empty-state h3 {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 0.5rem;
    }

    .empty-state p {
      color: var(--text-medium);
      max-width: 350px;
      margin: 0 auto 1.5rem;
      line-height: 1.5;
    }

    /* ============================================
       MODALS
    ============================================ */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(45, 52, 54, 0.6);
      backdrop-filter: blur(8px);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 1rem;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: var(--bg-white);
      border-radius: 20px;
      width: 100%;
      max-width: 900px;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: var(--shadow-lg);
    }

    .modal.modal-large {
      max-width: 1200px;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid var(--border-light);
      background: var(--bg-light);
    }

    .modal-header h2 {
      font-size: 1.125rem;
      font-weight: 700;
      color: var(--text-dark);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .modal-close {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: transparent;
      border: none;
      color: var(--text-medium);
      font-size: 1.25rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .modal-close:hover {
      background: var(--bg-white);
      color: var(--error);
    }

    .modal-body {
      padding: 1.5rem;
      overflow-y: auto;
      flex: 1;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 0.75rem;
      padding: 1.25rem 1.5rem;
      border-top: 1px solid var(--border-light);
      background: var(--bg-light);
    }

    /* Form Styles */
    .form-group {
      margin-bottom: 1.25rem;
    }

    .form-group label {
      display: block;
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--text-dark);
    }

    .form-group label span {
      color: var(--error);
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 0.75rem 1rem;
      background: var(--bg-light);
      border: 2px solid var(--border-light);
      border-radius: 10px;
      color: var(--text-dark);
      font-size: 0.875rem;
      font-family: inherit;
      transition: all 0.2s ease;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary-blue);
      background: var(--bg-white);
    }

    .form-group textarea {
      min-height: 200px;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 0.8125rem;
      line-height: 1.5;
      resize: vertical;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    @media (max-width: 640px) {
      .form-row { grid-template-columns: 1fr; }
    }

    .form-hint {
      font-size: 0.75rem;
      color: var(--text-light);
      margin-top: 0.375rem;
    }

    /* Deploy Result */
    .deploy-result {
      background: rgba(0, 184, 148, 0.08);
      border: 2px solid var(--success);
      border-radius: 12px;
      padding: 1.25rem;
      margin-bottom: 1.25rem;
    }

    .deploy-result h4 {
      color: var(--success);
      font-size: 0.95rem;
      font-weight: 700;
      margin-bottom: 0.375rem;
    }

    .deploy-result p {
      color: var(--text-medium);
      font-size: 0.875rem;
    }

    .deploy-result a {
      color: var(--success);
      font-weight: 600;
    }

    /* ============================================
       ANALYTICS MODAL
    ============================================ */
    .analytics-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    @media (max-width: 640px) {
      .analytics-grid { grid-template-columns: 1fr; }
    }

    .analytics-card {
      background: var(--bg-light);
      border: 1px solid var(--border-light);
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
    }

    .analytics-card .label {
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-medium);
      margin-bottom: 0.375rem;
    }

    .analytics-card .value {
      font-size: 1.75rem;
      font-weight: 800;
      color: var(--text-dark);
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 0.25rem;
      margin-bottom: 1.5rem;
      border-bottom: 2px solid var(--border-light);
    }

    .tab {
      padding: 0.75rem 1.25rem;
      background: none;
      border: none;
      color: var(--text-medium);
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      position: relative;
      transition: all 0.2s ease;
    }

    .tab::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--primary-blue);
      transform: scaleX(0);
      transition: transform 0.2s ease;
    }

    .tab:hover {
      color: var(--text-dark);
    }

    .tab.active {
      color: var(--primary-blue);
    }

    .tab.active::after {
      transform: scaleX(1);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Leads Table */
    .leads-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }

    .leads-table th,
    .leads-table td {
      padding: 0.875rem;
      text-align: left;
      border-bottom: 1px solid var(--border-light);
    }

    .leads-table th {
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-medium);
      background: var(--bg-light);
    }

    /* ============================================
       GENERATE PAGE MODAL
    ============================================ */
    .generate-options {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    @media (max-width: 768px) {
      .generate-options { grid-template-columns: 1fr; }
    }

    .generate-option {
      background: var(--bg-light);
      border: 2px solid var(--border-light);
      border-radius: 14px;
      padding: 1.5rem;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
    }

    .generate-option:hover {
      border-color: var(--primary-blue);
      background: var(--bg-white);
    }

    .generate-option.selected {
      border-color: var(--primary-blue);
      background: rgba(59, 159, 216, 0.05);
    }

    .generate-option-icon {
      width: 56px;
      height: 56px;
      border-radius: 14px;
      background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-blue-dark) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      font-size: 1.5rem;
    }

    .generate-option h4 {
      font-size: 1rem;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 0.375rem;
    }

    .generate-option p {
      font-size: 0.8rem;
      color: var(--text-medium);
      line-height: 1.4;
    }

    /* ============================================
       VISUAL EDITOR MODAL
    ============================================ */
    .editor-layout {
      display: grid;
      grid-template-columns: 1fr 350px;
      gap: 1.5rem;
      height: 70vh;
    }

    @media (max-width: 1024px) {
      .editor-layout {
        grid-template-columns: 1fr;
        height: auto;
      }
    }

    .editor-preview {
      border: 1px solid var(--border-light);
      border-radius: 12px;
      overflow: hidden;
      background: #fff;
    }

    .editor-preview iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .editor-chat {
      display: flex;
      flex-direction: column;
      background: var(--bg-light);
      border-radius: 12px;
      border: 1px solid var(--border-light);
      overflow: hidden;
    }

    .chat-header {
      padding: 1rem;
      border-bottom: 1px solid var(--border-light);
      background: var(--bg-white);
    }

    .chat-header h4 {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-dark);
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .chat-message {
      padding: 0.75rem 1rem;
      border-radius: 12px;
      max-width: 90%;
      font-size: 0.875rem;
      line-height: 1.5;
    }

    .chat-message.user {
      background: var(--primary-blue);
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }

    .chat-message.assistant {
      background: var(--bg-white);
      color: var(--text-dark);
      align-self: flex-start;
      border: 1px solid var(--border-light);
      border-bottom-left-radius: 4px;
    }

    .chat-input-area {
      padding: 1rem;
      border-top: 1px solid var(--border-light);
      background: var(--bg-white);
    }

    .chat-input-wrapper {
      display: flex;
      gap: 0.5rem;
    }

    .chat-input {
      flex: 1;
      padding: 0.75rem 1rem;
      border: 2px solid var(--border-light);
      border-radius: 10px;
      font-size: 0.875rem;
      font-family: inherit;
      resize: none;
    }

    .chat-input:focus {
      outline: none;
      border-color: var(--primary-blue);
    }

    /* ============================================
       LOADING SPINNER
    ============================================ */
    .loading-spinner {
      display: inline-block;
      width: 18px;
      height: 18px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ============================================
       MOBILE RESPONSIVE
    ============================================ */
    .mobile-menu-toggle {
      display: none;
      background: none;
      border: none;
      padding: 0.5rem;
      cursor: pointer;
      color: var(--text-dark);
    }

    @media (max-width: 1024px) {
      .sidebar {
        transform: translateX(-100%);
      }

      .sidebar.open {
        transform: translateX(0);
      }

      .main-content {
        margin-left: 0;
      }

      .mobile-menu-toggle {
        display: block;
      }

      .sidebar-overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.5);
        z-index: 99;
      }

      .sidebar-overlay.active {
        display: block;
      }
    }

    @media (max-width: 768px) {
      .main-body {
        padding: 1rem;
      }

      .main-header {
        padding: 1rem;
      }

      .page-title {
        font-size: 1.25rem;
      }

      .pages-table .hide-mobile {
        display: none;
      }
    }

    /* ============================================
       SCROLLBAR
    ============================================ */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-light);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border-light);
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-light);
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="unicorn-loader">
      <div class="unicorn-character">
        <div class="unicorn-tail">
          <div class="tail-strand"></div>
          <div class="tail-strand"></div>
          <div class="tail-strand"></div>
        </div>
        <div class="unicorn-leg-back left"></div>
        <div class="unicorn-leg-back right"></div>
        <div class="unicorn-body"></div>
        <div class="unicorn-leg-front left"></div>
        <div class="unicorn-leg-front right"></div>
        <div class="unicorn-mane">
          <div class="mane-strand"></div>
          <div class="mane-strand"></div>
          <div class="mane-strand"></div>
        </div>
        <div class="unicorn-head"></div>
        <div class="unicorn-ear"></div>
        <div class="unicorn-horn"></div>
        <div class="unicorn-eye"></div>
        <div class="unicorn-snout"></div>
      </div>
      <div class="laptop">
        <div class="laptop-screen">
          <div class="code-line"></div>
          <div class="code-line"></div>
          <div class="code-line"></div>
          <div class="code-line"></div>
        </div>
        <div class="laptop-base"></div>
      </div>
    </div>
    <div class="loading-text">Building magic<span class="loading-dots"></span></div>
  </div>

  <!-- Interactive Background -->
  <div class="bg-interactive">
    <div class="bg-gradient-orb orb-1"></div>
    <div class="bg-gradient-orb orb-2"></div>
  </div>
  <div class="cursor-glow" id="cursorGlow"></div>

  <!-- Mobile Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

  <!-- Main Layout -->
  <div class="app-layout">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <img src="/logo.png" alt="Unicorn Marketers">
        </div>
      </div>

      <nav class="sidebar-nav">
        <div class="nav-section">
          <div class="nav-section-title">Main</div>
          <a class="nav-item active" data-page="dashboard">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="7" rx="1"/>
              <rect x="14" y="3" width="7" height="7" rx="1"/>
              <rect x="3" y="14" width="7" height="7" rx="1"/>
              <rect x="14" y="14" width="7" height="7" rx="1"/>
            </svg>
            Dashboard
          </a>
          <a class="nav-item" data-page="pages">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14,2 14,8 20,8"/>
            </svg>
            Landing Pages
            <span class="badge" id="navPageCount">0</span>
          </a>
        </div>

        <div class="nav-section">
          <div class="nav-section-title">Create</div>
          <a class="nav-item" onclick="openGenerateModal()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2L2 7l10 5 10-5-10-5z"/>
              <path d="M2 17l10 5 10-5"/>
              <path d="M2 12l10 5 10-5"/>
            </svg>
            Generate Page
          </a>
          <a class="nav-item" onclick="openCreateModal()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            Import HTML
          </a>
        </div>

        <div class="nav-section">
          <div class="nav-section-title">Analytics</div>
          <a class="nav-item" data-page="analytics">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 20V10"/>
              <path d="M12 20V4"/>
              <path d="M6 20v-6"/>
            </svg>
            Reports
          </a>
          <a class="nav-item" data-page="leads">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
              <circle cx="9" cy="7" r="4"/>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
            Leads
          </a>
        </div>
      </nav>

      <div class="sidebar-footer">
        <div class="user-info">
          <div class="user-avatar">UM</div>
          <div class="user-details">
            <div class="user-name">Unicorn Team</div>
            <div class="user-role">Administrator</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <header class="main-header">
        <button class="mobile-menu-toggle" onclick="toggleSidebar()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6"/>
            <line x1="3" y1="12" x2="21" y2="12"/>
            <line x1="3" y1="18" x2="21" y2="18"/>
          </svg>
        </button>
        <h1 class="page-title">Dashboard</h1>
        <button class="btn btn-primary" onclick="openCreateModal()">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="8" y1="2" x2="8" y2="14"/>
            <line x1="2" y1="8" x2="14" y2="8"/>
          </svg>
          New Page
        </button>
      </header>

      <div class="main-body">
        <!-- Stats Grid -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon blue">üìÑ</div>
            <div class="stat-label">Total Pages</div>
            <div class="stat-value" id="statPages">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon green">üü¢</div>
            <div class="stat-label">Live Pages</div>
            <div class="stat-value" id="statLive">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon orange">üëÅÔ∏è</div>
            <div class="stat-label">Total Views</div>
            <div class="stat-value" id="statViews">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon purple">üéØ</div>
            <div class="stat-label">Total Leads</div>
            <div class="stat-value" id="statLeads">0</div>
          </div>
        </div>

        <!-- Pages Table -->
        <div class="section-card">
          <div class="section-header">
            <div class="section-title">
              <h2>Landing Pages</h2>
              <span class="badge" id="pageCount">0</span>
            </div>
            <button class="btn btn-secondary btn-small" onclick="loadPages()">
              <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 7a6 6 0 1 1 1 3.5"/>
                <path d="M1 11V7h4"/>
              </svg>
              Refresh
            </button>
          </div>
          <div id="pagesContainer">
            <div class="empty-state">
              <div class="empty-illustration">ü¶Ñ</div>
              <h3>No landing pages yet</h3>
              <p>Create your first page by generating one with AI or importing HTML.</p>
              <button class="btn btn-primary" onclick="openGenerateModal()">Generate with AI</button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Create/Edit Modal -->
  <div class="modal-overlay" id="createModal">
    <div class="modal">
      <div class="modal-header">
        <h2 id="modalTitle">‚ú® New Landing Page</h2>
        <button class="modal-close" onclick="closeCreateModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div id="deployResult"></div>
        <form id="pageForm">
          <input type="hidden" id="pageId">
          <div class="form-row">
            <div class="form-group">
              <label for="pageName">Page Name <span>*</span></label>
              <input type="text" id="pageName" placeholder="e.g., Summer Sale Landing Page" required>
            </div>
            <div class="form-group">
              <label for="clientName">Client Name</label>
              <input type="text" id="clientName" placeholder="e.g., Acme Corp">
            </div>
          </div>
          <div class="form-group">
            <label for="pageSlug">URL Slug</label>
            <input type="text" id="pageSlug" placeholder="summer-sale">
            <div class="form-hint">Leave blank to auto-generate from name</div>
          </div>
          <div class="form-group">
            <label for="htmlContent">HTML Content <span>*</span></label>
            <textarea id="htmlContent" placeholder="Paste your landing page HTML here..." required></textarea>
            <div class="form-hint">Paste the full HTML. Tracking code will be auto-injected.</div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="metaTitle">Meta Title</label>
              <input type="text" id="metaTitle" placeholder="Page title for SEO">
            </div>
            <div class="form-group">
              <label for="metaDescription">Meta Description</label>
              <input type="text" id="metaDescription" placeholder="Page description for SEO">
            </div>
          </div>
          <div class="form-group">
            <label for="trackingPixel">Custom Tracking Code</label>
            <textarea id="trackingPixel" style="min-height: 80px;" placeholder="Facebook Pixel, Google Analytics, etc."></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeCreateModal()">Cancel</button>
        <button type="button" class="btn btn-secondary" onclick="saveDraft()" id="saveDraftBtn">Save Draft</button>
        <button type="button" class="btn btn-success" onclick="deployPage()" id="deployBtn">üöÄ Deploy Live</button>
      </div>
    </div>
  </div>

  <!-- Analytics Modal -->
  <div class="modal-overlay" id="analyticsModal">
    <div class="modal modal-large">
      <div class="modal-header">
        <h2 id="analyticsTitle">üìä Page Analytics</h2>
        <button class="modal-close" onclick="closeAnalyticsModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="tabs">
          <button class="tab active" onclick="switchTab(event, 'overview')">Overview</button>
          <button class="tab" onclick="switchTab(event, 'leads')">Leads</button>
          <button class="tab" onclick="switchTab(event, 'abtest')">A/B Testing</button>
        </div>
        <div id="tabOverview" class="tab-content active">
          <div class="analytics-grid">
            <div class="analytics-card">
              <div class="label">Page Views</div>
              <div class="value" id="aViews">0</div>
            </div>
            <div class="analytics-card">
              <div class="label">Leads</div>
              <div class="value" id="aLeads">0</div>
            </div>
            <div class="analytics-card">
              <div class="label">Conversion Rate</div>
              <div class="value" id="aConversion">0%</div>
            </div>
          </div>
          <h4 style="margin-bottom: 1rem; font-weight: 600;">Traffic Sources</h4>
          <div id="trafficSources"></div>
        </div>
        <div id="tabLeads" class="tab-content">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h4 style="font-weight: 600;">Captured Leads</h4>
            <button class="btn btn-small btn-secondary" onclick="exportLeads()">Export CSV</button>
          </div>
          <div id="leadsTable"></div>
        </div>
        <div id="tabAbtest" class="tab-content">
          <h4 style="margin-bottom: 1rem; font-weight: 600;">A/B Test Results</h4>
          <div id="abtestResults"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Generate Page Modal -->
  <div class="modal-overlay" id="generateModal">
    <div class="modal">
      <div class="modal-header">
        <h2>üöÄ Generate Landing Page</h2>
        <button class="modal-close" onclick="closeGenerateModal()">&times;</button>
      </div>
      <div class="modal-body">
        <p style="margin-bottom: 1.5rem; color: var(--text-medium);">Choose the type of page you want to create:</p>

        <div class="generate-options">
          <div class="generate-option" onclick="selectGenerateType('advertorial')" data-type="advertorial">
            <div class="generate-option-icon">üì∞</div>
            <h4>Advertorial</h4>
            <p>Editorial-style content that promotes a product naturally</p>
          </div>
          <div class="generate-option" onclick="selectGenerateType('sales-letter')" data-type="sales-letter">
            <div class="generate-option-icon">‚úâÔ∏è</div>
            <h4>Sales Letter</h4>
            <p>Long-form persuasive copy with proven frameworks</p>
          </div>
          <div class="generate-option" onclick="selectGenerateType('quiz')" data-type="quiz">
            <div class="generate-option-icon">‚ùì</div>
            <h4>Quiz Funnel</h4>
            <p>Interactive quiz that qualifies leads</p>
          </div>
        </div>

        <div class="form-group">
          <label for="generateProduct">Product/Offer URL or Description <span>*</span></label>
          <input type="text" id="generateProduct" placeholder="https://example.com/product or describe your offer...">
        </div>

        <div class="form-group">
          <label for="generateAudience">Target Audience</label>
          <textarea id="generateAudience" style="min-height: 80px;" placeholder="Describe your ideal customer..."></textarea>
        </div>

        <div class="form-group">
          <label for="generateTone">Tone & Style</label>
          <select id="generateTone">
            <option value="professional">Professional & Trustworthy</option>
            <option value="urgent">Urgent & Exciting</option>
            <option value="friendly">Friendly & Conversational</option>
            <option value="authoritative">Authoritative & Expert</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeGenerateModal()">Cancel</button>
        <button type="button" class="btn btn-primary" onclick="generatePage()" id="generateBtn">
          ‚ú® Generate Page
        </button>
      </div>
    </div>
  </div>

  <!-- Visual Editor Modal -->
  <div class="modal-overlay" id="editorModal">
    <div class="modal modal-large" style="max-width: 95vw; height: 90vh;">
      <div class="modal-header">
        <h2 id="editorTitle">‚úèÔ∏è Edit Page</h2>
        <button class="modal-close" onclick="closeEditorModal()">&times;</button>
      </div>
      <div class="modal-body" style="padding: 1rem; height: calc(100% - 130px);">
        <div class="editor-layout">
          <div class="editor-preview">
            <iframe id="editorPreview" sandbox="allow-same-origin"></iframe>
          </div>
          <div class="editor-chat">
            <div class="chat-header">
              <h4>üí¨ AI Editor</h4>
            </div>
            <div class="chat-messages" id="chatMessages">
              <div class="chat-message assistant">
                Hi! I can help you edit this page. Try saying things like:
                <ul style="margin-top: 0.5rem; padding-left: 1.25rem;">
                  <li>Change the headline to...</li>
                  <li>Make the CTA button green</li>
                  <li>Add a testimonial section</li>
                  <li>Update the pricing to $99</li>
                </ul>
              </div>
            </div>
            <div class="chat-input-area">
              <div class="chat-input-wrapper">
                <textarea class="chat-input" id="chatInput" placeholder="Describe your changes..." rows="2"></textarea>
                <button class="btn btn-primary btn-icon" onclick="sendChatMessage()" id="chatSendBtn">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="22" y1="2" x2="11" y2="13"/>
                    <polygon points="22,2 15,22 11,13 2,9"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeEditorModal()">Cancel</button>
        <button type="button" class="btn btn-success" onclick="saveAndDeploy()" id="saveDeployBtn">üíæ Save & Deploy</button>
      </div>
    </div>
  </div>

  <script>
    // ============================================
    // GLOBALS
    // ============================================
    let currentPageId = null;
    let pages = [];
    let selectedGenerateType = null;
    let currentEditingPage = null;

    // ============================================
    // LOADING & INIT
    // ============================================
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loadingScreen').classList.add('hidden');
      }, 1200);
      loadPages();
    });

    // ============================================
    // CURSOR EFFECT
    // ============================================
    const cursorGlow = document.getElementById('cursorGlow');
    const orbs = document.querySelectorAll('.bg-gradient-orb');

    document.addEventListener('mousemove', (e) => {
      cursorGlow.style.left = e.clientX + 'px';
      cursorGlow.style.top = e.clientY + 'px';
      cursorGlow.classList.add('active');

      const centerX = window.innerWidth / 2;
      const centerY = window.innerHeight / 2;
      const deltaX = (e.clientX - centerX) / centerX;
      const deltaY = (e.clientY - centerY) / centerY;

      if (orbs[0]) orbs[0].style.transform = `translate(${deltaX * 20}px, ${deltaY * 20}px)`;
      if (orbs[1]) orbs[1].style.transform = `translate(${-deltaX * 15}px, ${-deltaY * 15}px)`;
    });

    document.addEventListener('mouseleave', () => {
      cursorGlow.classList.remove('active');
    });

    // ============================================
    // SIDEBAR
    // ============================================
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
      document.getElementById('sidebarOverlay').classList.toggle('active');
    }

    function closeSidebar() {
      document.getElementById('sidebar').classList.remove('open');
      document.getElementById('sidebarOverlay').classList.remove('active');
    }

    // ============================================
    // DATA LOADING
    // ============================================
    async function loadPages() {
      try {
        const res = await fetch('/api/pages');
        pages = await res.json();
        renderPages();
        updateStats();
      } catch (error) {
        console.error('Failed to load pages:', error);
      }
    }

    function updateStats() {
      document.getElementById('statPages').textContent = pages.length;
      document.getElementById('statLive').textContent = pages.filter(p => p.status === 'live').length;

      // Fix: Ensure view_count is parsed as integer
      const totalViews = pages.reduce((sum, p) => sum + (parseInt(p.view_count) || 0), 0);
      document.getElementById('statViews').textContent = formatNumber(totalViews);

      const totalLeads = pages.reduce((sum, p) => sum + (parseInt(p.lead_count) || 0), 0);
      document.getElementById('statLeads').textContent = formatNumber(totalLeads);

      document.getElementById('pageCount').textContent = pages.length;
      document.getElementById('navPageCount').textContent = pages.length;
    }

    function formatNumber(num) {
      if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
      if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
      return num.toString();
    }

    function renderPages() {
      const container = document.getElementById('pagesContainer');

      if (pages.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-illustration">ü¶Ñ</div>
            <h3>No landing pages yet</h3>
            <p>Create your first page by generating one with AI or importing HTML.</p>
            <button class="btn btn-primary" onclick="openGenerateModal()">Generate with AI</button>
          </div>
        `;
        return;
      }

      container.innerHTML = `
        <div class="pages-table-wrapper">
          <table class="pages-table">
            <thead>
              <tr>
                <th>Name</th>
                <th class="hide-mobile">Client</th>
                <th>Status</th>
                <th>Views</th>
                <th>Leads</th>
                <th class="hide-mobile">Conv.</th>
                <th class="hide-mobile">URL</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              ${pages.map(page => {
                const views = parseInt(page.view_count) || 0;
                const leads = parseInt(page.lead_count) || 0;
                const convRate = views > 0 ? ((leads / views) * 100).toFixed(1) + '%' : '‚Äî';
                const liveUrl = page.status === 'live' ? `${getBaseUrl()}/${page.slug}/` : null;

                return `
                  <tr>
                    <td>
                      <div class="page-name">
                        <strong>${escapeHtml(page.name)}</strong>
                        <small>${page.slug}</small>
                      </div>
                    </td>
                    <td class="hide-mobile">${escapeHtml(page.client_name || '‚Äî')}</td>
                    <td>
                      <span class="status-badge status-${page.status}">
                        <span class="dot"></span>
                        ${page.status === 'live' ? 'Live' : 'Draft'}
                      </span>
                    </td>
                    <td class="metric">${formatNumber(views)}</td>
                    <td class="metric">${formatNumber(leads)}</td>
                    <td class="hide-mobile metric">${convRate}</td>
                    <td class="hide-mobile">
                      ${liveUrl ? `<a href="${liveUrl}" target="_blank" class="page-link">${page.slug}</a>` : '<span class="metric-secondary">‚Äî</span>'}
                    </td>
                    <td>
                      <div class="actions">
                        <button class="btn btn-icon btn-ghost" onclick="openEditor('${page.id}')" title="Visual Edit">üé®</button>
                        <button class="btn btn-icon btn-ghost" onclick="openAnalytics('${page.id}')" title="Analytics">üìä</button>
                        <button class="btn btn-icon btn-ghost" onclick="editPage('${page.id}')" title="Edit HTML">‚úèÔ∏è</button>
                        ${page.status !== 'live' ? `<button class="btn btn-icon btn-ghost" onclick="quickDeploy('${page.id}')" title="Deploy" style="color: var(--success)">üöÄ</button>` : ''}
                        <button class="btn btn-icon btn-ghost" onclick="deletePage('${page.id}')" title="Delete" style="color: var(--error)">üóëÔ∏è</button>
                      </div>
                    </td>
                  </tr>
                `;
              }).join('')}
            </tbody>
          </table>
        </div>
      `;
    }

    function getBaseUrl() {
      return localStorage.getItem('pagesBaseUrl') || 'https://maxwellfinn.github.io/unicorn-landing-pages-live';
    }

    // ============================================
    // CREATE/EDIT MODAL
    // ============================================
    function openCreateModal() {
      document.getElementById('modalTitle').textContent = '‚ú® New Landing Page';
      document.getElementById('pageForm').reset();
      document.getElementById('pageId').value = '';
      document.getElementById('deployResult').innerHTML = '';
      document.getElementById('saveDraftBtn').style.display = 'inline-flex';
      document.getElementById('createModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeCreateModal() {
      document.getElementById('createModal').classList.remove('active');
      document.body.style.overflow = '';
    }

    async function editPage(id) {
      const page = pages.find(p => p.id === id);
      if (!page) return;

      document.getElementById('modalTitle').textContent = '‚úèÔ∏è Edit Landing Page';
      document.getElementById('pageId').value = page.id;
      document.getElementById('pageName').value = page.name;
      document.getElementById('clientName').value = page.client_name || '';
      document.getElementById('pageSlug').value = page.slug;
      document.getElementById('htmlContent').value = page.html_content;
      document.getElementById('metaTitle').value = page.meta_title || '';
      document.getElementById('metaDescription').value = page.meta_description || '';
      document.getElementById('trackingPixel').value = page.tracking_pixel || '';
      document.getElementById('deployResult').innerHTML = '';
      document.getElementById('saveDraftBtn').style.display = page.status === 'live' ? 'none' : 'inline-flex';

      document.getElementById('createModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    async function saveDraft() {
      const id = document.getElementById('pageId').value;
      const data = getFormData();

      try {
        const url = id ? `/api/pages/${id}` : '/api/pages';
        const method = id ? 'PUT' : 'POST';

        const res = await fetch(url, { method, headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) });
        if (!res.ok) throw new Error((await res.json()).error);

        await loadPages();
        closeCreateModal();
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }

    async function deployPage() {
      const btn = document.getElementById('deployBtn');
      const originalText = btn.innerHTML;
      btn.innerHTML = '<span class="loading-spinner"></span> Deploying...';
      btn.disabled = true;

      try {
        const data = getFormData();
        const id = document.getElementById('pageId').value;

        let res;
        if (id) {
          await fetch(`/api/pages/${id}`, { method: 'PUT', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) });
          res = await fetch(`/api/pages/${id}/deploy`, { method: 'POST' });
        } else {
          res = await fetch('/api/deploy', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) });
        }

        const result = await res.json();
        if (!res.ok) throw new Error(result.error);

        document.getElementById('deployResult').innerHTML = `
          <div class="deploy-result">
            <h4>‚úÖ Successfully Deployed!</h4>
            <p>Live at: <a href="${result.liveUrl}" target="_blank">${result.liveUrl}</a></p>
          </div>
        `;

        document.getElementById('pageId').value = result.page.id;
        document.getElementById('saveDraftBtn').style.display = 'none';

        await loadPages();

        // Auto-close after 2 seconds
        setTimeout(() => {
          closeCreateModal();
        }, 2000);

      } catch (error) {
        alert('Deployment failed: ' + error.message);
      } finally {
        btn.innerHTML = originalText;
        btn.disabled = false;
      }
    }

    async function quickDeploy(id) {
      if (!confirm('Deploy this page live?')) return;

      try {
        const res = await fetch(`/api/pages/${id}/deploy`, { method: 'POST' });
        const result = await res.json();
        if (!res.ok) throw new Error(result.error);

        alert('Deployed! Live at: ' + result.liveUrl);
        await loadPages();
      } catch (error) {
        alert('Deployment failed: ' + error.message);
      }
    }

    async function deletePage(id) {
      if (!confirm('Delete this page? This cannot be undone.')) return;

      try {
        const res = await fetch(`/api/pages/${id}`, { method: 'DELETE' });
        if (!res.ok) throw new Error((await res.json()).error);
        await loadPages();
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }

    function getFormData() {
      return {
        name: document.getElementById('pageName').value,
        client_name: document.getElementById('clientName').value || null,
        slug: document.getElementById('pageSlug').value || null,
        html_content: document.getElementById('htmlContent').value,
        meta_title: document.getElementById('metaTitle').value || null,
        meta_description: document.getElementById('metaDescription').value || null,
        tracking_pixel: document.getElementById('trackingPixel').value || null
      };
    }

    // ============================================
    // ANALYTICS MODAL
    // ============================================
    async function openAnalytics(id) {
      currentPageId = id;
      const page = pages.find(p => p.id === id);
      document.getElementById('analyticsTitle').textContent = `üìä Analytics: ${page?.name || 'Page'}`;
      document.getElementById('analyticsModal').classList.add('active');
      document.body.style.overflow = 'hidden';

      document.querySelectorAll('#analyticsModal .tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('#analyticsModal .tab-content').forEach(c => c.classList.remove('active'));
      document.querySelector('#analyticsModal .tab').classList.add('active');
      document.getElementById('tabOverview').classList.add('active');

      await loadAnalytics(id);
      await loadLeads(id);
      await loadABResults(id);
    }

    function closeAnalyticsModal() {
      document.getElementById('analyticsModal').classList.remove('active');
      document.body.style.overflow = '';
      currentPageId = null;
    }

    function switchTab(event, tab) {
      const modal = event.target.closest('.modal');
      modal.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      modal.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      event.target.classList.add('active');
      document.getElementById(`tab${tab.charAt(0).toUpperCase() + tab.slice(1)}`).classList.add('active');
    }

    async function loadAnalytics(id) {
      try {
        const res = await fetch(`/api/pages/${id}/analytics`);
        const data = await res.json();

        document.getElementById('aViews').textContent = formatNumber(data.summary.total_views);
        document.getElementById('aLeads').textContent = formatNumber(data.summary.total_leads);
        document.getElementById('aConversion').textContent = data.summary.conversion_rate + '%';

        const sources = data.views_by_source || [];
        document.getElementById('trafficSources').innerHTML = sources.length > 0
          ? `<table class="leads-table"><thead><tr><th>Source</th><th>Views</th></tr></thead><tbody>${sources.map(s => `<tr><td>${escapeHtml(s.source)}</td><td class="metric">${formatNumber(s.views)}</td></tr>`).join('')}</tbody></table>`
          : '<p style="color: var(--text-light); text-align: center; padding: 2rem;">No traffic data yet</p>';
      } catch (error) {
        console.error('Failed to load analytics:', error);
      }
    }

    async function loadLeads(id) {
      try {
        const res = await fetch(`/api/pages/${id}/leads`);
        const leads = await res.json();

        document.getElementById('leadsTable').innerHTML = leads.length > 0
          ? `<table class="leads-table"><thead><tr><th>Date</th><th>Email</th><th>Name</th><th>Phone</th><th>Source</th></tr></thead><tbody>${leads.map(l => `<tr><td>${new Date(l.created_at).toLocaleDateString()}</td><td>${escapeHtml(l.email || '‚Äî')}</td><td>${escapeHtml(l.name || '‚Äî')}</td><td>${escapeHtml(l.phone || '‚Äî')}</td><td>${escapeHtml(l.utm_source || 'direct')}</td></tr>`).join('')}</tbody></table>`
          : '<p style="color: var(--text-light); text-align: center; padding: 2rem;">No leads yet</p>';
      } catch (error) {
        console.error('Failed to load leads:', error);
      }
    }

    async function loadABResults(id) {
      try {
        const res = await fetch(`/api/pages/${id}/ab-results`);
        const data = await res.json();
        const allVariants = [data.control, ...(data.variants || [])];

        document.getElementById('abtestResults').innerHTML = `<table class="leads-table"><thead><tr><th>Variant</th><th>Views</th><th>Conversions</th><th>Rate</th></tr></thead><tbody>${allVariants.map(v => `<tr><td>${escapeHtml(v.name || v.variant_name)}</td><td class="metric">${formatNumber(v.views)}</td><td class="metric">${formatNumber(v.conversions)}</td><td class="metric">${v.conversion_rate}%</td></tr>`).join('')}</tbody></table>`;
      } catch (error) {
        console.error('Failed to load A/B results:', error);
      }
    }

    function exportLeads() {
      if (currentPageId) window.open(`/api/pages/${currentPageId}/leads/export`, '_blank');
    }

    // ============================================
    // GENERATE PAGE MODAL
    // ============================================
    function openGenerateModal() {
      selectedGenerateType = null;
      document.querySelectorAll('.generate-option').forEach(el => el.classList.remove('selected'));
      document.getElementById('generateProduct').value = '';
      document.getElementById('generateAudience').value = '';
      document.getElementById('generateTone').value = 'professional';
      document.getElementById('generateModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeGenerateModal() {
      document.getElementById('generateModal').classList.remove('active');
      document.body.style.overflow = '';
    }

    function selectGenerateType(type) {
      selectedGenerateType = type;
      document.querySelectorAll('.generate-option').forEach(el => {
        el.classList.toggle('selected', el.dataset.type === type);
      });
    }

    async function generatePage() {
      if (!selectedGenerateType) {
        alert('Please select a page type');
        return;
      }

      const product = document.getElementById('generateProduct').value.trim();
      if (!product) {
        alert('Please enter a product URL or description');
        return;
      }

      const btn = document.getElementById('generateBtn');
      btn.innerHTML = '<span class="loading-spinner"></span> Generating (this may take 30-60 seconds)...';
      btn.disabled = true;

      try {
        const res = await fetch('/api/generate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            type: selectedGenerateType,
            productName: product,
            productUrl: product.startsWith('http') ? product : null,
            targetAudience: document.getElementById('generateAudience').value.trim() || null,
            additionalContext: `Tone: ${document.getElementById('generateTone').value}`
          })
        });

        const result = await res.json();
        if (!res.ok) throw new Error(result.error);

        // Close generate modal and open create modal with generated content
        closeGenerateModal();

        // Pre-fill the create modal with generated content
        document.getElementById('modalTitle').textContent = '‚ú® New Landing Page (AI Generated)';
        document.getElementById('pageForm').reset();
        document.getElementById('pageId').value = '';
        document.getElementById('pageName').value = result.productName + ' - ' + selectedGenerateType.charAt(0).toUpperCase() + selectedGenerateType.slice(1);
        document.getElementById('htmlContent').value = result.html;
        document.getElementById('deployResult').innerHTML = '';
        document.getElementById('saveDraftBtn').style.display = 'inline-flex';
        document.getElementById('createModal').classList.add('active');
        document.body.style.overflow = 'hidden';

      } catch (error) {
        alert('Generation failed: ' + error.message);
      } finally {
        btn.innerHTML = '‚ú® Generate Page';
        btn.disabled = false;
      }
    }

    // ============================================
    // VISUAL EDITOR MODAL
    // ============================================
    function openEditor(id) {
      const page = pages.find(p => p.id === id);
      if (!page) return;

      currentEditingPage = page;
      document.getElementById('editorTitle').textContent = `‚úèÔ∏è Edit: ${page.name}`;

      // Load page into iframe
      const iframe = document.getElementById('editorPreview');
      iframe.srcdoc = page.html_content;

      // Clear chat
      document.getElementById('chatMessages').innerHTML = `
        <div class="chat-message assistant">
          Hi! I can help you edit "${page.name}". Try saying things like:
          <ul style="margin-top: 0.5rem; padding-left: 1.25rem;">
            <li>Change the headline to...</li>
            <li>Make the CTA button green</li>
            <li>Add a testimonial section</li>
            <li>Update the pricing to $99</li>
          </ul>
        </div>
      `;

      document.getElementById('chatInput').value = '';
      document.getElementById('editorModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeEditorModal() {
      document.getElementById('editorModal').classList.remove('active');
      document.body.style.overflow = '';
      currentEditingPage = null;
    }

    async function sendChatMessage() {
      const input = document.getElementById('chatInput');
      const message = input.value.trim();
      if (!message || !currentEditingPage) return;

      const chatMessages = document.getElementById('chatMessages');
      const sendBtn = document.getElementById('chatSendBtn');

      // Add user message
      chatMessages.innerHTML += `<div class="chat-message user">${escapeHtml(message)}</div>`;
      input.value = '';

      // Add loading message
      chatMessages.innerHTML += `<div class="chat-message assistant" id="chatLoading"><span class="loading-spinner" style="border-color: rgba(59,159,216,0.3); border-top-color: var(--primary-blue);"></span> Making changes...</div>`;
      chatMessages.scrollTop = chatMessages.scrollHeight;

      // Disable input
      sendBtn.disabled = true;
      input.disabled = true;

      try {
        // Get current HTML from iframe
        const iframe = document.getElementById('editorPreview');
        const currentHtml = iframe.srcdoc;

        const res = await fetch('/api/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            message: message,
            currentHtml: currentHtml,
            pageContext: {
              name: currentEditingPage.name,
              client_name: currentEditingPage.client_name
            }
          })
        });

        const result = await res.json();

        // Remove loading message
        document.getElementById('chatLoading')?.remove();

        if (!res.ok) throw new Error(result.error);

        // Update iframe with new HTML
        iframe.srcdoc = result.html;

        // Update the stored page HTML
        currentEditingPage.html_content = result.html;

        // Add success message
        chatMessages.innerHTML += `
          <div class="chat-message assistant">
            ${escapeHtml(result.message)}
          </div>
        `;

      } catch (error) {
        // Remove loading message
        document.getElementById('chatLoading')?.remove();

        chatMessages.innerHTML += `
          <div class="chat-message assistant" style="border-color: var(--error); background: rgba(225,112,85,0.05);">
            Sorry, I encountered an error: ${escapeHtml(error.message)}
          </div>
        `;
      } finally {
        sendBtn.disabled = false;
        input.disabled = false;
        input.focus();
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }
    }

    // Handle Enter key in chat
    document.addEventListener('DOMContentLoaded', () => {
      const chatInput = document.getElementById('chatInput');
      if (chatInput) {
        chatInput.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendChatMessage();
          }
        });
      }
    });

    async function saveAndDeploy() {
      if (!currentEditingPage) return;

      const btn = document.getElementById('saveDeployBtn');
      btn.innerHTML = '<span class="loading-spinner"></span> Saving & Deploying...';
      btn.disabled = true;

      try {
        // First save the updated HTML
        await fetch(`/api/pages/${currentEditingPage.id}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name: currentEditingPage.name,
            html_content: currentEditingPage.html_content,
            client_name: currentEditingPage.client_name,
            slug: currentEditingPage.slug,
            meta_title: currentEditingPage.meta_title,
            meta_description: currentEditingPage.meta_description,
            tracking_pixel: currentEditingPage.tracking_pixel
          })
        });

        // Then deploy
        const res = await fetch(`/api/pages/${currentEditingPage.id}/deploy`, { method: 'POST' });
        const result = await res.json();
        if (!res.ok) throw new Error(result.error);

        await loadPages();

        alert('Page saved and deployed! Live at: ' + result.liveUrl);
        closeEditorModal();
      } catch (error) {
        alert('Deployment failed: ' + error.message);
      } finally {
        btn.innerHTML = 'üíæ Save & Deploy';
        btn.disabled = false;
      }
    }

    // ============================================
    // UTILITIES
    // ============================================
    function escapeHtml(text) {
      if (!text) return '';
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Close modals on escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeCreateModal();
        closeAnalyticsModal();
        closeGenerateModal();
        closeEditorModal();
      }
    });

    // Close modals on overlay click
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          closeCreateModal();
          closeAnalyticsModal();
          closeGenerateModal();
          closeEditorModal();
        }
      });
    });
  </script>
</body>
</html>
